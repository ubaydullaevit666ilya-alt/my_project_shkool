from flask import Flask, render_template

print("--> Инициализация приложения...")

# Создаем экземпляр веб-приложения
app = Flask(__name__)

# Контент сайта: Лендинг школы Python
lessons_db = {
    "1": {
        "title": "Почему Python?",
        "content": "Python — простой и популярный язык программирования. Он отлично подходит для начинающих. Его легко читать и понимать. Python используют для создания сайтов, ботов, анализа данных и искусственного интеллекта.",
        "author": "Преимущества"
    },
    "2": {
        "title": "Где учиться?",
        "content": "Изучать Python можно онлайн. Хорошие школы и платформы: Stepik (stepik.org), Coursera (coursera.org), Udemy (udemy.com), Codecademy (codecademy.com), GeekBrains (gb.ru).",
        "author": "Ресурсы"
    },
    "3": {
        "title": "Для кого?",
        "content": "Этот курс и язык подходят для школьников, студентов и всех начинающих, кто хочет начать карьеру в IT с нуля.",
        "author": "Аудитория"
    },
    "4": {
        "title": "Контакты",
        "content": "Хочешь научиться программировать и создавать свои проекты? Если есть вопросы, пиши в Telegram: @ihlosbek23",
        "author": "Связь"
    },
    "5": {
        "title": "Установка Python",
        "content": "Чтобы начать программировать, нужно скачать Python с официального сайта python.org. Установка простая: скачайте установщик и следуйте инструкциям.",
        "author": "Начало работы"
    },
    "6": {
        "title": "Переменные",
        "content": "Переменные — это как коробки, в которых мы храним данные. Например: name = 'Alex'. Теперь в переменной name лежит строка 'Alex'.",
        "author": "Основы"
    },
    "7": {
        "title": "Типы данных",
        "content": "В Python есть разные типы данных: строки (str), целые числа (int), дробные числа (float) и логические значения (bool).",
        "author": "Теория"
    },
    "8": {
        "title": "Условия (if/else)",
        "content": "Программы могут принимать решения. Например: if age >= 18: print('Вход разрешен'). Это позволяет делать программы умными.",
        "author": "Логика"
    }
}

# Генерация 1000 дополнительных уроков с примерами кода
for i in range(9, 1009):
    lessons_db[str(i)] = {
        "title": f"Урок {i}: Практика Python",
        "content": f"""
        <p>В этом уроке мы практикуем работу с числами и функциями на примере номера {i}.</p>
        <p><strong>Пример кода:</strong></p>
        <pre><code>def practice_lesson_{i}():
    number = {i}
    result = number * 2
    print(f"Результат урока {i}: {{result}}")

practice_lesson_{i}()</code></pre>
        """,
        "author": "AI-Генератор"
    }

# Маршрут для главной страницы
@app.route('/')
def index():
    # Передаем список всех уроков в HTML-шаблон
    return render_template('index.html', lessons=lessons_db)

# Маршрут для страницы конкретного урока
@app.route('/lesson/<lesson_id>')
def lesson(lesson_id):
    # Находим урок по его ID в нашей "базе данных"
    lesson_data = lessons_db.get(lesson_id)
    # Если урок не найден, показываем страницу ошибки (можно сделать красивее)
    if not lesson_data:
        return "Урок не найден!", 404
    # Передаем данные одного урока в HTML-шаблон
    return render_template('lesson.html', lesson=lesson_data)


# Эта строка позволяет запустить сервер разработки, когда мы выполняем файл python app.py
if __name__ == "__main__":
    # debug=True автоматически перезагружает сервер при изменениях в коде
    print("--> Запуск сервера Flask...")
    app.run(host='0.0.0.0', debug=True)